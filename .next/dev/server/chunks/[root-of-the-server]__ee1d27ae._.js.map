{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abdul/Downloads/PayFlow/app/api/history/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\n\r\nexport async function GET() {\r\n  try {\r\n    // Fetches the 10 most recent transactions\r\n    const paystackResponse = await fetch(\r\n      'https://api.paystack.co/transaction?perPage=10&status=success',\r\n      {\r\n        method: 'GET',\r\n        headers: {\r\n          Authorization: `Bearer ${process.env.PAYSTACK_SECRET_KEY}`,\r\n        },\r\n        // We can cache this for a short time, e.g., 60 seconds\r\n        next: { revalidate: 60 },\r\n      }\r\n    );\r\n\r\n    const paystackData = await paystackResponse.json();\r\n\r\n    if (!paystackResponse.ok) {\r\n      console.error('Paystack API Error:', paystackData);\r\n      return NextResponse.json(\r\n        { error: 'Failed to fetch transaction history', details: paystackData.message },\r\n        { status: 500 }\r\n      );\r\n    }\r\n\r\n    // Send the array of transactions back to the frontend\r\n    return NextResponse.json(paystackData.data);\r\n\r\n  } catch (error) {\r\n    console.error('Internal Server Error:', error);\r\n    return NextResponse.json(\r\n      { error: 'Internal Server Error' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe;IACpB,IAAI;QACF,0CAA0C;QAC1C,MAAM,mBAAmB,MAAM,MAC7B,iEACA;YACE,QAAQ;YACR,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,QAAQ,GAAG,CAAC,mBAAmB,EAAE;YAC5D;YACA,uDAAuD;YACvD,MAAM;gBAAE,YAAY;YAAG;QACzB;QAGF,MAAM,eAAe,MAAM,iBAAiB,IAAI;QAEhD,IAAI,CAAC,iBAAiB,EAAE,EAAE;YACxB,QAAQ,KAAK,CAAC,uBAAuB;YACrC,OAAO,+QAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;gBAAuC,SAAS,aAAa,OAAO;YAAC,GAC9E;gBAAE,QAAQ;YAAI;QAElB;QAEA,sDAAsD;QACtD,OAAO,+QAAY,CAAC,IAAI,CAAC,aAAa,IAAI;IAE5C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,+QAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}